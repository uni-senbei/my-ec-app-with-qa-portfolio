【ECサイト機能要件 追加・変更リスト】

バージョン: 1.0
作成日: 2025年6月20日
合意者: [ユーザー様の名前]、AI（QAサポート）
参照元: ECサイト機能要件定義書 (バージョン 1.1)

1. ログイン試行回数カウンターのリセットロジック

関連する既存要件: ユーザー認証・認可機能 / ログイン試行回数制限・アカウントロック
変更・追加内容:
ログイン試行回数カウンターは、以下のいずれかの条件でリセットされる。
ユーザーが正常にログインに成功した場合。
アカウントロックが設定された5分間の時間が経過し、ロックが自動解除された場合。
パスワードリセット（再設定）が完了した場合。
単純な時間経過のみ（例：24時間経過）ではカウンターはリセットされない。
2. カートの最大商品数オーバー時（21個目以降）の具体的な振る舞い

関連する既存要件: 購入機能 / カートに関する要件 (「カートに追加できる商品の種類は最大20個まで」)
変更・追加内容:
カートに21個目の商品を追加しようとした際、その商品はカートに追加されない。
UI上では、以下のエラーメッセージとフィードバックを表示する。
エラーメッセージ例: 「カートに追加できる商品の種類は20個までです。」
視覚的なフィードバック（例：ポップアップ、アラート、またはボタン横のテキスト表示）とともに表示する。
サーバーサイドAPIからは、適切なHTTPステータスコード（例：400 Bad Request または 403 Forbidden）と、エラーの詳細を示すJSONレスポンスを返す。
3. カートの「最終更新日時」の更新トリガー

関連する既存要件: 購入機能 / カートに関する要件 (「ログインユーザーのカート内容は、最終更新日から7日間保存される」)
変更・追加内容:
カートの「最終更新日時」は、以下のユーザー操作が行われた際に更新される。
カートへの商品追加時
カートからの商品削除時
カート内の商品数量変更時
ユーザーがログインした際（ログイン時にカートデータをロードまたはマージするため）
カート内容の表示（GETリクエストのみ）では、「最終更新日時」は更新されない。
3. 機能実装の中断と優先順位の調整

関連する既存要件: 全体の開発計画
変更・追加内容:
以下の機能について、現状の課題解決の複雑さとプロジェクトの進捗への影響を鑑み、一旦中断ステータスに移行する。これらの機能は、将来的な開発フェーズで改めて優先順位を検討する。

- パスワードリセット機能:
    - 理由: 環境起因の技術的な問題解決に多大な時間を要するため。
    - 影響: ユーザーがパスワードを忘れた際の再設定ができない。
- カートエンティティの「最終更新日時」機能:
    - 理由: 実装に関する原因不明の課題に時間を要するため。
    - 影響: カートの最終更新日時を記録・利用する機能が提供されない。

開発タスクの優先順位を以下のように調整する。
- 最優先: カートの最大商品数オーバー時の振る舞い実装
- 高優先度: REST Assuredの導入と自動APIテストの記述
- 中優先度: 注文・購入処理機能、カートの「最終更新日時」更新トリガーの実装
