ECサイト機能要件定義書 (バージョン 1.0)
1. はじめに

本ドキュメントは、既存のユーザー管理システムを拡張し、ECサイトとしての機能を追加するための要件を定義するものである。開発素人がAIの支援を受けながら開発を進め、その過程でQAスキルを磨き、GitHub上でその成果を公開することを目的とする。

2. 対象システム

Spring Boot (Java), MySQL, HTML/CSS/JavaScript を用いたWebアプリケーション。

3. 機能要件

3.1. 商品管理機能 (商品エンティティ)

商品登録・参照:
商品名、商品説明、価格、商品種別（単発買い切り型/継続課金型）を登録できる。
商品一覧を閲覧できる（未ログインユーザーも可能）。
個別の商品詳細を閲覧できる（未ログインユーザーも可能）。
商品種別の詳細:
単発買い切り型: 一度購入すれば、それ以降の支払いは発生しない。
継続課金型: 定期的に料金が発生する。
3.2. ユーザー認証・認可機能

ユーザー登録:
既存のユーザー管理システムと連携し、ECサイト利用のためのユーザー登録を可能にする。
ログイン・ログアウト:
登録済みユーザーはログインし、購入機能やマイページ機能にアクセスできる。
アクセス制限:
購入機能、マイページ機能はログインユーザーのみ利用可能とする。
商品一覧、商品詳細は未ログインユーザーも閲覧可能とする。
3.3. 購入機能

商品選択・カート:
ログイン済みユーザーは商品をカートに追加できる（簡易的なカート機能、または直接購入でも可）。
購入処理:
選択した商品の購入を確定できる。
購入完了後、購入履歴に記録される。
今回は外部決済システムとの連携は行わず、内部的に「購入完了」とする。
継続課金型商品の購入:
継続課金型商品を購入した場合、定期課金が開始される状態とする。
3.4. マイページ機能

購入履歴表示:
ログイン済みユーザーは自分の購入履歴を一覧で確認できる。
単発買い切り型商品と継続課金型商品の両方を表示できる。
継続課金停止機能:
継続課金型商品を購入しているユーザーは、マイページからその課金を停止できる。
停止した場合、それ以降の料金は発生しないものとする。
3.5. 管理機能（今回はスコープ外）

商品登録・編集・削除機能については、今回は手動でのデータベース操作や、簡易的な管理者向け画面作成も検討するが、主要なスコープ外とする。
4. 非機能要件（QA視点での考慮）

ユーザビリティ: 各画面の操作性、分かりやすさ。
パフォーマンス: 商品一覧や購入履歴表示など、データ量が増加した場合の応答速度。
セキュリティ:
認証機能（ログインセッション管理、パスワードの安全な保存）。
認可機能（未ログインユーザーがログイン専用機能にアクセスできないこと）。
インジェクション攻撃（SQLインジェクションなど）への基本的な対策。
データ整合性:
購入処理におけるデータの二重登録や欠損がないこと。
継続課金停止時のデータ状態の正確性。
エラーハンドリング:
予期せぬエラー発生時の適切なメッセージ表示と、サーバーサイドでのログ記録。


